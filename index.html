<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>赛车游戏</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="game-container">
        <h1>🏎️ 赛车游戏</h1>

        <div class="info-panel">
            <div class="info-item">关卡: <span id="level">1</span>/7</div>
            <div class="info-item">分数: <span id="score">0</span></div>
            <div class="info-item">奖励: <span id="totalReward">0</span></div>
            <button class="pause-btn" id="pauseBtn" onclick="togglePause()">⏸️ 暂停</button>
        </div>

        <canvas id="gameCanvas" width="800" height="500"></canvas>

        <div class="controls">
            <p class="desktop-text">使用 ⬅️ ➡️ 或 A D 控制赛车左右移动 | 空格键发射子弹消灭屏障 | ⚠️ 小心红色TNT障碍，碰到会爆炸！</p>
            <p class="mobile-text" style="display: none;">使用下方按钮控制赛车 | ⚠️ 小心红色TNT障碍，碰到会爆炸！</p>
        </div>
    </div>

    <!-- 移动端控制按钮 -->
    <div class="mobile-controls">
        <button class="mobile-btn mobile-btn-left" id="btnLeft">⬅️</button>
        <button class="mobile-btn mobile-btn-shoot" id="btnShoot">🔫</button>
        <button class="mobile-btn mobile-btn-right" id="btnRight">➡️</button>
    </div>

    <!-- 开始游戏界面 -->
    <div id="startOverlay" class="overlay">
        <div class="overlay-content">
            <h2 style="color: #4ecdc4;">🏎️ 赛车游戏</h2>
            <p style="font-size: 1.2em; margin-bottom: 20px;">7个关卡等你挑战！</p>
            <p style="color: #aaa; margin-bottom: 15px;">选择你的赛车：</p>
            <div class="car-selection" id="carSelection">
                <div class="car-option selected" data-car="0" onclick="selectCar(0)">
                    <div class="car-preview">🚗</div>
                </div>
                <div class="car-option" data-car="1" onclick="selectCar(1)">
                    <div class="car-preview">🏎️</div>
                </div>
                <div class="car-option" data-car="2" onclick="selectCar(2)">
                    <div class="car-preview">🚙</div>
                </div>
                <div class="car-option" data-car="3" onclick="selectCar(3)">
                    <div class="car-preview">🚕</div>
                </div>
                <div class="car-option" data-car="4" onclick="selectCar(4)">
                    <div class="car-preview">🚓</div>
                </div>
            </div>
            <p style="color: #aaa; margin-top: 20px; margin-bottom: 10px;">控制赛车左右移动，空格键发射子弹</p>
            <p style="color: #aaa; margin-bottom: 10px;">屏障从上方出现，用子弹消灭它们或小心躲避！</p>
            <p style="color: #ff4757; margin-bottom: 10px; font-weight: bold;">⚠️ 注意：红色TNT障碍碰到会爆炸，必须用子弹提前消灭！</p>
            <button onclick="startGame()">开始游戏</button>
        </div>
    </div>

    <!-- 游戏结束界面 -->
    <div id="gameOverOverlay" class="overlay hidden">
        <div class="overlay-content">
            <h2 class="game-over">💥 游戏结束</h2>
            <p style="font-size: 1.3em; margin: 15px 0;" id="gameOverReason">你撞到障碍了！</p>
            <p>最终分数: <span id="finalScore" style="color: #feca57;">0</span></p>
            <p>总奖励: <span id="finalReward" style="color: #4ecdc4;">0</span></p>
            <button onclick="restartGame()">重新开始</button>
        </div>
    </div>

    <!-- 关卡完成界面 -->
    <div id="levelCompleteOverlay" class="overlay hidden">
        <div class="overlay-content">
            <h2 class="level-complete">🎉 关卡完成！</h2>
            <div class="reward">
                获得奖励: <span id="levelReward">100</span> 分
            </div>
            <p style="font-size: 1.2em;">准备进入第 <span id="nextLevel">2</span> 关</p>
            <button onclick="nextLevel()">继续</button>
        </div>
    </div>

    <!-- 游戏胜利界面 -->
    <div id="winOverlay" class="overlay hidden">
        <div class="overlay-content">
            <h2 style="color: #4ecdc4;">🏆 恭喜通关！</h2>
            <p style="font-size: 1.5em; margin: 15px 0;">你完成了所有7个关卡！</p>
            <div class="reward">
                总奖励: <span id="winReward">0</span> 分
            </div>
            <p>最终分数: <span id="winScore" style="color: #feca57;">0</span></p>
            <button onclick="restartGame()">再玩一次</button>
        </div>
    </div>

    <!-- 暂停界面 -->
    <div id="pauseOverlay" class="overlay hidden">
        <div class="overlay-content">
            <h2 style="color: #4ecdc4; font-size: 2.5em;">⏸️ 游戏暂停</h2>
            <p style="font-size: 1.2em; margin: 20px 0; color: #aaa;">游戏已暂停</p>
            <button onclick="togglePause()">继续游戏</button>
            <button onclick="restartGame()" style="margin-top: 10px; background: linear-gradient(45deg, #ff6b6b, #ee5a6f);">重新开始</button>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/gameState.js"></script>
    <script src="js/spawn.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/render.js"></script>
    <script src="js/gameLogic.js"></script>
    <script src="js/events.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
